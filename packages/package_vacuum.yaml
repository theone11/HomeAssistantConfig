#####################################
########## E N T I T I E S ##########
#####################################

camera:
  - platform: xiaomi_cloud_map_extractor
    name: "Vacuum Bottom"
    host: !secret vacuum_bottom_host
    token: !secret vacuum_bottom_token
    username: !secret xiaomi_username
    password: !secret xiaomi_password
    country: !secret xiaomi_country
    draw: ['all']
    attributes:
      - calibration_points
    scan_interval:
      seconds: 60

  - platform: xiaomi_cloud_map_extractor
    name: "Vacuum Top"
    host: !secret vacuum_top_host
    token: !secret vacuum_top_token
    username: !secret xiaomi_username
    password: !secret xiaomi_password
    country: !secret xiaomi_country
    draw: ['all']
    attributes:
      - calibration_points
    scan_interval:
      seconds: 60

sensor:
  - platform: template
    sensors:
      vacuum_bottom_problem:
        icon_template: mdi:robot-vacuum
        value_template: >
          {% if (states('vacuum.vacuum_bottom') == 'unknown') or (states('vacuum.vacuum_bottom') == 'unavailable') %}
            {{ 1 }}
          {% else %}
            {{ 0 }}
          {% endif %}
      vacuum_top_problem:
        icon_template: mdi:robot-vacuum
        value_template: >
          {% if (states('vacuum.vacuum_top') == 'unknown') or (states('vacuum.vacuum_top') == 'unavailable') %}
            {{ 1 }}
          {% else %}
            {{ 0 }}
          {% endif %}


###########################################
########## A U T O M A T I O N S ##########
###########################################

###################################
########## S C R I P T S ##########
###################################
